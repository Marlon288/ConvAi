<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: modules/sharedData.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: modules/sharedData.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file sharedData.js
 * @description Shared data module for managing the vector store, retrieval chain, and controllers.
 * @author Marlon D'Ambrosio
 * @version 1.0
 */

var { OpenAI } = require("@langchain/openai");
var { ConversationSummaryMemory } = require("langchain/memory");

let vectorStore = null;
let retrievalChain = null;
const controllers = new Map();
let model = null;
const memoryBuffers = new Map();

/**
 * Sets the vector store.
 * @param {Object} store - The vector store object.
 */
function setVectorStore(store) {
  vectorStore = store;
}

/**
 * Gets the vector store.
 * @returns {Object} The vector store object.
 */
function getVectorStore() {
  return vectorStore;
}

/**
 * Sets the retrieval chain.
 * @param {Object} store - The retrieval chain object.
 */
function setRetrievalChain(store) {
  retrievalChain = store;
}

/**
 * Gets the retrieval chain.
 * @returns {Object} The retrieval chain object.
 */
function getRetrievalChain() {
  return retrievalChain;
}

/**
 * Stores a controller with the given ID.
 * @param {string} id - The ID of the controller.
 * @param {Object} controller - The controller object.
 */
function storeController(id, controller) {
  controllers.set(id, controller);
}

/**
 * Gets a controller with the given ID.
 * @param {string} id - The ID of the controller.
 * @returns {Object} The controller object.
 */
function getController(id) {
  console.log("Get Controller:" + id);
  return controllers.get(id);
}

/**
 * Removes a controller with the given ID.
 * @param {string} id - The ID of the controller.
 */
function removeController(id) {
  controllers.delete(id);
}

/**
 * Sets the model.
 * @param {Object} Model - The model object.
 */
function setModel(Model) {
  model = Model;
}

/**
 * Gets the model.
 * @returns {Object} A copy of the model object.
 */
function getModel() {
  return Object.assign({}, model);
}

/**
 * Sets up streaming for the model.
 * @param {Object} res - The response object.
 */
function setupStreamingForModel(res) {
  model.streaming = true;
  model.callbacks = [
    {
      handleLLMNewToken(token) {
        res.write(token);
      },
    },
  ];
}

module.exports = {
  setVectorStore,
  getVectorStore,
  setRetrievalChain,
  getRetrievalChain,
  storeController,
  getController,
  removeController,
  setModel,
  getModel,
  setupStreamingForModel
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#getController">getController</a></li><li><a href="global.html#getModel">getModel</a></li><li><a href="global.html#getRetrievalChain">getRetrievalChain</a></li><li><a href="global.html#getVectorStore">getVectorStore</a></li><li><a href="global.html#initRetrievalChain">initRetrievalChain</a></li><li><a href="global.html#initVectorStore">initVectorStore</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#readUsers">readUsers</a></li><li><a href="global.html#removeController">removeController</a></li><li><a href="global.html#setModel">setModel</a></li><li><a href="global.html#setRetrievalChain">setRetrievalChain</a></li><li><a href="global.html#setVectorStore">setVectorStore</a></li><li><a href="global.html#setupStreamingForModel">setupStreamingForModel</a></li><li><a href="global.html#storeController">storeController</a></li><li><a href="global.html#verifyToken">verifyToken</a></li><li><a href="global.html#writeUsers">writeUsers</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Apr 09 2024 13:14:59 GMT+0100 (British Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
